!function(e){var t={};function s(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=27)}([function(e,t,s){"use strict";var n=s(2),o=s(11),i=Object.prototype.toString;function r(e){return"[object Array]"===i.call(e)}function a(e){return null!==e&&"object"==typeof e}function c(e){return"[object Function]"===i.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),r(e))for(var s=0,n=e.length;s<n;s++)t.call(null,e[s],s,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:r,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:o,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:c,isStream:function(e){return a(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:l,merge:function e(){var t={};function s(s,n){"object"==typeof t[n]&&"object"==typeof s?t[n]=e(t[n],s):t[n]=s}for(var n=0,o=arguments.length;n<o;n++)l(arguments[n],s);return t},deepMerge:function e(){var t={};function s(s,n){"object"==typeof t[n]&&"object"==typeof s?t[n]=e(t[n],s):t[n]="object"==typeof s?e({},s):s}for(var n=0,o=arguments.length;n<o;n++)l(arguments[n],s);return t},extend:function(e,t,s){return l(t,function(t,o){e[o]=s&&"function"==typeof t?n(t,s):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,s){e.exports=s(10)},function(e,t,s){"use strict";e.exports=function(e,t){return function(){for(var s=new Array(arguments.length),n=0;n<s.length;n++)s[n]=arguments[n];return e.apply(t,s)}}},function(e,t,s){"use strict";var n=s(0);function o(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,s){if(!t)return e;var i;if(s)i=s(t);else if(n.isURLSearchParams(t))i=t.toString();else{var r=[];n.forEach(t,function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),r.push(o(t)+"="+o(e))}))}),i=r.join("&")}if(i){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},function(e,t,s){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,s){"use strict";(function(t){var n=s(0),o=s(17),i={"Content-Type":"application/x-www-form-urlencoded"};function r(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,c={adapter:(void 0!==t&&"[object process]"===Object.prototype.toString.call(t)?a=s(6):"undefined"!=typeof XMLHttpRequest&&(a=s(6)),a),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],function(e){c.headers[e]={}}),n.forEach(["post","put","patch"],function(e){c.headers[e]=n.merge(i)}),e.exports=c}).call(this,s(16))},function(e,t,s){"use strict";var n=s(0),o=s(18),i=s(3),r=s(20),a=s(21),c=s(7);e.exports=function(e){return new Promise(function(t,l){var d=e.data,m=e.headers;n.isFormData(d)&&delete m["Content-Type"];var u=new XMLHttpRequest;if(e.auth){var h=e.auth.username||"",f=e.auth.password||"";m.Authorization="Basic "+btoa(h+":"+f)}if(u.open(e.method.toUpperCase(),i(e.url,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,u.onreadystatechange=function(){if(u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))){var s="getAllResponseHeaders"in u?r(u.getAllResponseHeaders()):null,n={data:e.responseType&&"text"!==e.responseType?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:s,config:e,request:u};o(t,l,n),u=null}},u.onabort=function(){u&&(l(c("Request aborted",e,"ECONNABORTED",u)),u=null)},u.onerror=function(){l(c("Network Error",e,null,u)),u=null},u.ontimeout=function(){l(c("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",u)),u=null},n.isStandardBrowserEnv()){var p=s(22),g=(e.withCredentials||a(e.url))&&e.xsrfCookieName?p.read(e.xsrfCookieName):void 0;g&&(m[e.xsrfHeaderName]=g)}if("setRequestHeader"in u&&n.forEach(m,function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete m[t]:u.setRequestHeader(t,e)}),e.withCredentials&&(u.withCredentials=!0),e.responseType)try{u.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&u.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){u&&(u.abort(),l(e),u=null)}),void 0===d&&(d=null),u.send(d)})}},function(e,t,s){"use strict";var n=s(19);e.exports=function(e,t,s,o,i){var r=new Error(e);return n(r,t,s,o,i)}},function(e,t,s){"use strict";var n=s(0);e.exports=function(e,t){t=t||{};var s={};return n.forEach(["url","method","params","data"],function(e){void 0!==t[e]&&(s[e]=t[e])}),n.forEach(["headers","auth","proxy"],function(o){n.isObject(t[o])?s[o]=n.deepMerge(e[o],t[o]):void 0!==t[o]?s[o]=t[o]:n.isObject(e[o])?s[o]=n.deepMerge(e[o]):void 0!==e[o]&&(s[o]=e[o])}),n.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],function(n){void 0!==t[n]?s[n]=t[n]:void 0!==e[n]&&(s[n]=e[n])}),s}},function(e,t,s){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t,s){"use strict";var n=s(0),o=s(2),i=s(12),r=s(8);function a(e){var t=new i(e),s=o(i.prototype.request,t);return n.extend(s,i.prototype,t),n.extend(s,t),s}var c=a(s(5));c.Axios=i,c.create=function(e){return a(r(c.defaults,e))},c.Cancel=s(9),c.CancelToken=s(25),c.isCancel=s(4),c.all=function(e){return Promise.all(e)},c.spread=s(26),e.exports=c,e.exports.default=c},function(e,t){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},function(e,t,s){"use strict";var n=s(0),o=s(3),i=s(13),r=s(14),a=s(8);function c(e){this.defaults=e,this.interceptors={request:new i,response:new i}}c.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method=e.method?e.method.toLowerCase():"get";var t=[r,void 0],s=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)s=s.then(t.shift(),t.shift());return s},c.prototype.getUri=function(e){return e=a(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],function(e){c.prototype[e]=function(t,s){return this.request(n.merge(s||{},{method:e,url:t}))}}),n.forEach(["post","put","patch"],function(e){c.prototype[e]=function(t,s,o){return this.request(n.merge(o||{},{method:e,url:t,data:s}))}}),e.exports=c},function(e,t,s){"use strict";var n=s(0);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){n.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=o},function(e,t,s){"use strict";var n=s(0),o=s(15),i=s(4),r=s(5),a=s(23),c=s(24);function l(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return l(e),e.baseURL&&!a(e.url)&&(e.url=c(e.baseURL,e.url)),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),n.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||r.adapter)(e).then(function(t){return l(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(t){return i(t)||(l(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,s){"use strict";var n=s(0);e.exports=function(e,t,s){return n.forEach(s,function(s){e=s(e,t)}),e}},function(e,t){var s,n,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(e){if(s===setTimeout)return setTimeout(e,0);if((s===i||!s)&&setTimeout)return s=setTimeout,setTimeout(e,0);try{return s(e,0)}catch(t){try{return s.call(null,e,0)}catch(t){return s.call(this,e,0)}}}!function(){try{s="function"==typeof setTimeout?setTimeout:i}catch(e){s=i}try{n="function"==typeof clearTimeout?clearTimeout:r}catch(e){n=r}}();var c,l=[],d=!1,m=-1;function u(){d&&c&&(d=!1,c.length?l=c.concat(l):m=-1,l.length&&h())}function h(){if(!d){var e=a(u);d=!0;for(var t=l.length;t;){for(c=l,l=[];++m<t;)c&&c[m].run();m=-1,t=l.length}c=null,d=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===r||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];l.push(new f(e,t)),1!==l.length||d||a(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=p,o.addListener=p,o.once=p,o.off=p,o.removeListener=p,o.removeAllListeners=p,o.emit=p,o.prependListener=p,o.prependOnceListener=p,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,s){"use strict";var n=s(0);e.exports=function(e,t){n.forEach(e,function(s,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=s,delete e[n])})}},function(e,t,s){"use strict";var n=s(7);e.exports=function(e,t,s){var o=s.config.validateStatus;!o||o(s.status)?e(s):t(n("Request failed with status code "+s.status,s.config,null,s.request,s))}},function(e,t,s){"use strict";e.exports=function(e,t,s,n,o){return e.config=t,s&&(e.code=s),e.request=n,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,s){"use strict";var n=s(0),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,s,i,r={};return e?(n.forEach(e.split("\n"),function(e){if(i=e.indexOf(":"),t=n.trim(e.substr(0,i)).toLowerCase(),s=n.trim(e.substr(i+1)),t){if(r[t]&&o.indexOf(t)>=0)return;r[t]="set-cookie"===t?(r[t]?r[t]:[]).concat([s]):r[t]?r[t]+", "+s:s}}),r):r}},function(e,t,s){"use strict";var n=s(0);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),s=document.createElement("a");function o(e){var n=e;return t&&(s.setAttribute("href",n),n=s.href),s.setAttribute("href",n),{href:s.href,protocol:s.protocol?s.protocol.replace(/:$/,""):"",host:s.host,search:s.search?s.search.replace(/^\?/,""):"",hash:s.hash?s.hash.replace(/^#/,""):"",hostname:s.hostname,port:s.port,pathname:"/"===s.pathname.charAt(0)?s.pathname:"/"+s.pathname}}return e=o(window.location.href),function(t){var s=n.isString(t)?o(t):t;return s.protocol===e.protocol&&s.host===e.host}}():function(){return!0}},function(e,t,s){"use strict";var n=s(0);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,s,o,i,r){var a=[];a.push(e+"="+encodeURIComponent(t)),n.isNumber(s)&&a.push("expires="+new Date(s).toGMTString()),n.isString(o)&&a.push("path="+o),n.isString(i)&&a.push("domain="+i),!0===r&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,s){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,s){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,s){"use strict";var n=s(9);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var s=this;e(function(e){s.reason||(s.reason=new n(e),t(s.reason))})}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o(function(t){e=t}),cancel:e}},e.exports=o},function(e,t,s){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,s){"use strict";s.r(t);var n=function(){let e=!1;var t,s;return t=navigator.userAgent||navigator.vendor||window.opera,s=navigator.appVersion,/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))?e=!0:/iPad/.test(s)&&(e=!0),e},o=s(1),i=s.n(o);var r={container:document.querySelector(".container"),menuList:document.querySelector(".menu"),caloriesText:document.querySelector(".calories--text"),caloriesIcon:document.querySelector(".calories--icon"),mainContainer:document.querySelector("main.foods"),loading:document.querySelector(".foods__loading"),btnPrev:document.querySelector(".btn__prev"),btnNext:document.querySelector(".btn__next"),footerBlock:document.querySelector("footer .bottom"),footerMenu:document.querySelector(".bottom__menu"),footerLangList:document.querySelector(".bottom__flags"),footerMenuLang:document.querySelector(".bottom__menu--language"),overlay:document.querySelector(".overlay"),setGramsWrapper:document.querySelector(".overlay__set-grams__wrapper"),setGramsContainer:document.querySelector(".overlay__set-grams__container"),setGramsImg:document.querySelector(".overlay__set-grams--image"),setGramsImgPseudo:document.querySelector(".overlay__set-grams--image--pseudo"),setGramsInputContainer:document.querySelector(".overlay__set-grams__input"),setGramsInputNumber:document.querySelector(".overlay__set-grams__input--number"),setGramsInputSymbol:document.querySelector(".overlay__set-grams__input--symbol"),setGramsBtnInc:document.querySelector(".overlay__set-grams__input--btns__btn--inc"),setGramsBtnDec:document.querySelector(".overlay__set-grams__input--btns__btn--dec"),setGramsBtn:document.querySelector(".overlay__set-grams__btn")};class a{constructor(e){this.items=e}getItemObj(e){return this.items.find(t=>t.title===e)}}const c={},l=new class{constructor(e){this.STATE=e,this.langs=["en","ru"],this.current=null,this.dictionary=null}fetchLocalStorage(){const e=window.localStorage.getItem("lang");e?this.current=e:(this.current="en",window.localStorage.setItem("lang","en"))}async fetchDictionary(){const e=await i()(`./data/lang/${this.current}.json`);this.dictionary=e.data}changeLanguage(e){window.localStorage.setItem("lang",e),this.current=e}loadRuFonts(){if(document.getElementById("ru-font"))return;document.head.insertAdjacentHTML("beforeend",'\n<link href="https://fonts.googleapis.com/css?family=Open+Sans:300&display=swap" rel="stylesheet" id="ru-font">\n<link href="https://fonts.googleapis.com/css?family=Roboto:300&display=swap" rel="stylesheet">')}}(c),d=new class{constructor(e,t){this.model=e,this.view=t}async setLanguage(e){e?this.model.changeLanguage(e):this.model.fetchLocalStorage(),"ru"===this.model.current?(this.model.loadRuFonts(),this.model.STATE.Menu.view.ruMenu()):this.model.STATE.Menu.view.enMenu(),await this.model.fetchDictionary()}}(l,new class{constructor(e){this.model=e}}(l));c.language=l;const m=new class{constructor(e){this.language=e,this.items=["fruits","vegetables","milk","fast-food","drinks","meat","sea-food","desserts","bread"],this.current=null,this.isOpened=!1,this.getNewZIndex=(()=>{let e=this.items.length;return function(){return++e}})()}rearrangeItems(e){const t=this.items.indexOf(e);this.items.splice(t,1),this.items.unshift(e)}}(c.language),u=new class{constructor(e,t){this.model=e,this.view=t}render(){this.view.render()}open(){this.view.open()}close(e){e&&this.model.rearrangeItems(e.dataset.type),this.view.close(e)}}(m,new class{constructor(e){this.model=e}render(){this.clear();const e=this.model.items.reduce((e,t)=>{return e+`<li class="menu__item" data-type="${t}">${this.model.language.dictionary.menu[t]}</li>`},"");r.menuList.insertAdjacentHTML("beforeend",e),this.model.current=this.model.items[0]}clear(){r.menuList.innerHTML=""}async open(){r.menuList.classList.remove("hidden"),r.menuList.classList.add("open"),this.model.isOpened=!0}close(e){const t=()=>{r.menuList.removeEventListener("transitionend",t),r.menuList.classList.add("hidden"),e&&this.rearrangeItems(e)};e&&(e.style.zIndex=this.model.getNewZIndex(),this.model.current=e.dataset.type),r.menuList.addEventListener("transitionend",t,!1),r.menuList.classList.remove("open"),this.model.isOpened=!1}rearrangeItems(e){const t=e.outerHTML;r.menuList.insertAdjacentHTML("afterbegin",t),r.menuList.removeChild(e)}ruMenu(){r.menuList.classList.remove("en"),r.menuList.classList.add("ru")}enMenu(){r.menuList.classList.remove("ru"),r.menuList.classList.add("en")}}(m));c.Menu=u;const h=new class{constructor(e){this.STATE=e,this.totalCalories=0,this.items=[],this.trashIsDemonstrated=null}addItem(e){this.items.push({title:e.title,calories:e.calories,grams:100})}deleteItem(e){const t=this.items.findIndex(t=>t.title===e);this.items.splice(t,1)}calculateTotalCalories(){this.totalCalories=this.items.reduce((e,t)=>e+t.calories,0)}setGrams(e,t){const s=e.title,n=this.items.find(e=>e.title===s);if(n){const e=+(t*n.calories/n.grams).toFixed(2);n.calories=e,n.grams=t}else{const s=+(t*e.calories/100).toFixed(2);this.items.push({title:e.title,calories:s,grams:t})}}getCalories(e){return this.items.find(t=>t.title===e).calories}getGrams(e){const t=this.items.find(t=>t.title===e);return!!t&&t.grams}clearTotalCalories(){this.items=[],this.totalCalories=0}}(c),f=new class{constructor(e,t){this.model=e,this.view=t}addItem(e){this.model.addItem(e),this.view.showCaloriesPopup(e.title),this.calculateTotalCalories()}deleteItem(e){this.model.deleteItem(e),this.calculateTotalCalories()}calculateTotalCalories(){this.model.calculateTotalCalories(),this.view.renderTotalCalories(),2!==this.model.items.length||this.model.trashIsDemonstrated?(this.checkTrashActive(),this.view.setupTrashEventListeners()):this.view.demonstrateTrashAnimation()}setGrams(e,t){this.model.setGrams(e,t),this.view.showCaloriesPopup(e.title),this.calculateTotalCalories()}includes(e){return this.model.items.findIndex(t=>t.title===e)>=0}clearTotalCalories(){this.model.clearTotalCalories(),this.view.clearTotalCalories()}checkTrashActive(){0===this.model.totalCalories?this.view.trashActive(!1):this.model.totalCalories>0&&this.view.trashActive(!0)}}(h,new class{constructor(e){this.model=e,this.isPopupAnimating=!1}renderTotalCalories(){const e=+r.caloriesText.textContent.replace(/\,/g,""),t=Math.ceil(this.model.totalCalories),s=Math.abs(t-e),n=performance.now();let o,i;function a(e){return e<1e3?e:(e=(e=(e=e.toString().split("").reverse().join("")).match(/\d{1,3}/g)).join(",")).split("").reverse().join("")}requestAnimationFrame(function c(l){(o=(l-n)/120)>1&&(o=1),i=Math.ceil(o*s),r.caloriesText.textContent=a(t>e?e+i:e-i),o<1&&requestAnimationFrame(c)})}showCaloriesPopup(e){document.body.querySelector(".popup-calories")||this.renderCaloriesPopup();const t=document.body.querySelector(".popup-calories"),s=t.querySelector(".popup-calories--text"),n=r.mainContainer.querySelector(`.foods__page__list__item__image img#${e}`),o=this.model.getCalories(e),i=()=>{const e=s.offsetWidth,n=s.offsetHeight,o=a.left+a.width/2-e/2,i=a.top+a.height/2-n;t.style.left=o+"px",t.style.top=i+"px",t.addEventListener("animationend",l,!1),t.classList.add("animate"),s.classList.add("animate"),this.isPopupAnimating=!0};this.isPopupAnimating&&(t.classList.remove("animate"),s.classList.remove("animate"),this.isPopupAnimating=!1),s.textContent=`+ ${Math.ceil(o)}`;const a=n.getBoundingClientRect(),c=new MutationObserver(e=>{e&&(c.disconnect(),i())});function l(){t.removeEventListener("animationend",l),s.classList.remove("animate"),t.classList.remove("animate"),t.classList.remove("display"),this.isPopupAnimating=!1}c.observe(t,{attributes:!0}),t.classList.add("display")}renderCaloriesPopup(){document.body.insertAdjacentHTML("beforeend",'\n<div class="popup-calories">\n\t<div class="popup-calories--text"></div>\n</div>')}async demonstrateTrashAnimation(){setTimeout(()=>{this.openTrash(),setTimeout(()=>{this.closeTrash(!0),this.model.trashIsDemonstrated=!0,window.sessionStorage.setItem("trashIsDemonstrated",!0)},1400)},1e3)}setupTrashEventListeners(){const e=r.caloriesIcon;e.addEventListener("mouseenter",()=>{e.classList.remove("calculator-close"),e.classList.remove("trash-close"),this.openTrash()},!1),e.addEventListener("mouseleave",()=>{e.classList.remove("calculator-close"),e.classList.remove("trash-close"),this.closeTrash()},!1)}clearTotalCalories(){this.renderTotalCalories(),this.closeTrash(),this.trashActive(!1)}openTrash(){if(!r.caloriesIcon.classList.contains("active"))return;this.model.trashIsDemonstrated||(this.model.trashIsDemonstrated=!0,window.sessionStorage.setItem("trashIsDemonstrated",!0));const e=r.caloriesIcon;e.addEventListener("transitionend",function t(){e.removeEventListener("transitionend",t);e.classList.remove("calculator");e.classList.add("trash");e.classList.remove("calculator-close")}),e.classList.add("calculator-close")}closeTrash(e){if(!e&&!r.caloriesIcon.classList.contains("active"))return;const t=r.caloriesIcon;t.addEventListener("transitionend",function e(){t.removeEventListener("transitionend",e);t.classList.remove("trash");t.classList.add("calculator");t.classList.remove("trash-close")}),t.classList.add("trash-close")}trashActive(e){e?r.caloriesIcon.classList.add("active"):r.caloriesIcon.classList.remove("active")}}(h));c.Calculator=f;const p=new class{constructor(e){this.STATE=e,this.itemsPerPage,this.curPage,this.curType,this.sets={},this.handIsDemonstrated=-1}async fetchFoodsSet(e){const t=(await i()(`./data/${e}.json`)).data;this.sets[e]=new a(t)}contains(e){return!!this.sets[e]}formatGrams(e){const t=this.STATE.language.dictionary.foods.g;if(e<1e3)return`${e}<span> ${t}</span>`;const s=this.STATE.language.dictionary.foods.kg,n=e.toString().split("").reverse().join("");let[o,i]=n.match(/\d{1,3}/g);return o=o.split("").reverse().join(""),i=i.split("").reverse().join(""),e%1e3==0?`${i}<span> ${s}</span>`:`${i},${o}<span> ${t}</span>`}fetchSessionStorage(){window.sessionStorage.getItem("handIsDemonstrated")?this.isPressAndHoldDemonstrated="true"===window.sessionStorage.getItem("handIsDemonstrated"):this.isPressAndHoldDemonstrated=!1}}(c),g=new class{constructor(e,t){this.model=e,this.view=t}async openFoodsSet(e,t=!0,s=1){this.model.contains(e)||(this.view.showLoading(),await this.model.fetchFoodsSet(e),this.view.hideLoading()),t&&this.view.clearFoodsPages(),this.model.curPage=s,this.model.curType=e,this.view.renderFoodsPages(s)}async changeFoodsSet(e){this.view.clearAroundPages(),await this.openFoodsSet(e,!1),this.view.renderPagesButtons(),await this.view._scroll(),this.view.clearZeroPage()}scrollToPrevPage(){this.view.scrollToPrevPage()}scrollToNextPage(){this.view.scrollToNextPage()}showPressAndHoldTooltip(){if(!this.model.handIsDemonstrated){const e=this.model.STATE.Calculator.model.items[this.model.STATE.Calculator.model.items.length-1];this.model.handIsDemonstrated=!0,window.sessionStorage.setItem("handIsDemonstrated","true"),setTimeout(()=>{this.view.showHandTooltip(e)},1e3)}}}(p,new class{constructor(e){this.model=e}renderFoodsPages(e){const t=this.model.curType;r.mainContainer.scrollLeft=0;const s=Math.ceil(this.model.sets[t].items.length/this.model.itemsPerPage);for(let t=1;t<=e;t++)this.renderPage(t);s>e&&this.renderPage(e+1),this.renderPagesButtons()}renderPage(e){const t=(e-1)*this.model.itemsPerPage,s=t+this.model.itemsPerPage,n=this.model.curType,o=this.model.sets[n].items,i=e=>{const t=this.model.STATE.Calculator.model.getGrams(e.title),s=this.model.STATE.language.dictionary.foods[n][e.title],o=this.model.STATE.language.dictionary.foods.g;return`\n\t\t\t<li class="foods__page__list__item ${!1!==t?"selected":""}">\n\t\t\t\t<div class="foods__page__list__item__image">\n\t\t\t\t\t<img id="${e.title}" src="./images/transparent.gif">\n\t\t\t\t</div>\n\t\t\t\t<div class="foods__page__list__item__text">\n\t\t\t\t\t<div class="foods__page__list__item__text--title">${s}</div>\n\t\t\t\t\t<div class="foods__page__list__item__text--grams">${t||"100"}<span> ${o}</span></div>\n\t\t\t\t</div>\n\t\t\t</li>`},a=o.slice(t,s).reduce((e,t)=>e+i(t),""),c=`\n\t\t<ul class="foods__page__list" data-type="${n}" data-page="${e}">\n\t\t\t${a}\n\t\t</ul>`;r.mainContainer.insertAdjacentHTML("beforeend",c)}clearFoodsPages(){const e=r.mainContainer.querySelectorAll(".foods__page__list");Array.from(e).forEach(e=>{e.remove()})}renderPagesButtons(){const e=this.model.curPage,t=r.mainContainer.querySelector(`.foods__page__list[data-page="${e-1}"]`),s=r.mainContainer.querySelector(`.foods__page__list[data-page="${e+1}"]`);t&&0!=+t.dataset.page?(r.btnPrev.classList.add("visible"),r.btnPrev.dataset.goto=+e-1):(r.btnPrev.classList.remove("visible"),r.btnPrev.dataset.goto=""),s?(r.btnNext.classList.add("visible"),r.btnNext.dataset.goto=+e+1):(r.btnNext.classList.remove("visible"),r.btnNext.dataset.goto="")}selectItem(e){e.classList.add("selected")}deselectItem(e){e.classList.remove("selected")}deselectAll(){const e=r.mainContainer.querySelectorAll(".foods__page__list__item.selected");Array.from(e).forEach(e=>{e.classList.remove("selected"),e.querySelector(".foods__page__list__item__text--grams").innerHTML="100<span> g</span>"})}setItemGrams(e,t){const s=this.model.formatGrams(t);e.querySelector(".foods__page__list__item__text--grams").innerHTML=s}scrollToPrevPage(){this.model.curPage--,this._scroll(),this.renderPagesButtons()}scrollToNextPage(){this.model.curPage++,this._scroll();const e=this.model.curType,t=Math.ceil(this.model.sets[e].items.length/this.model.itemsPerPage);r.mainContainer.querySelector(`.foods__page__list[data-page="${this.model.curPage+1}"]`)||this.model.curPage<t&&this.renderPage(this.model.curPage+1),this.renderPagesButtons()}animateScroll(e){let t;1===e?t=this.model.curPage+1:0===e&&(t=this.model.curPage-1);const s=r.mainContainer.querySelector(`.foods__page__list[data-page="${t}"]`).offsetLeft,n=()=>{r.mainContainer.scrollLeft>=s&&(r.mainContainer.scrollLeft=s,r.mainContainer.style.overflowX="hidden",0===e?this.scrollToPrevPage():1===e&&this.scrollToNextPage(),r.mainContainer.removeEventListener("scroll",n))};r.mainContainer.addEventListener("scroll",n)}_scroll(){return r.mainContainer.querySelector(`.foods__page__list[data-page="${this.model.curPage}"]`).scrollIntoView({behavior:"smooth",inline:"start"}),new Promise(e=>{setTimeout(()=>{e()},500)})}clearAroundPages(){const e=r.mainContainer.querySelectorAll(".foods__page__list");Array.from(e).forEach(e=>{e.dataset.page!=this.model.curPage?e.remove():e.dataset.page=0})}showLoading(){r.loading.classList.add("display"),r.loading.offsetWidth,r.loading.classList.add("visible")}hideLoading(){r.loading.classList.remove("visible"),r.loading.classList.remove("display")}scrollToFirstPage(){r.mainContainer.querySelector('.foods__page__list[data-page="0"]').classList.add("scroll-out")}scrollTo(e,t=200){const s=r.mainContainer.querySelector(`.foods__page__list[data-page="${e}"]`).offsetLeft,n=performance.now();return new Promise(e=>{let o,i,a;requestAnimationFrame(function c(l){(o=(l-n)/t)>1&&(o=1,e()),i=function(e){return e}(o),a=i*s,r.mainContainer.scrollLeft=a,o<1&&requestAnimationFrame(c)})})}clearZeroPage(){r.mainContainer.querySelector('.foods__page__list[data-page="0"]').remove(),r.mainContainer.scrollLeft=0}goToPage(e){const t=r.mainContainer.querySelector(`.foods__page__list[data-page="${e}"]`).offsetLeft;r.mainContainer.scrollLeft=t}showHandTooltip(e){this.renderTooltip();const t=document.body.querySelector(".tooltip-hand");t.classList.add("display");const s=t.offsetWidth,n=t.offsetHeight;t.style.left=window.innerWidth/2-s/2+"px";const o=r.mainContainer.querySelector(`.foods__page__list__item__image img#${e.title}`).closest(".foods__page__list__item"),i=parseInt(getComputedStyle(t.querySelector(".tooltip-hand--icon")).height),a=o.getBoundingClientRect(),c=a.left+a.width/2-s/2,l=a.top+a.height/2-(n-i);function d(){t.removeEventListener("animationend",d),t.classList.add("press"),t.classList.remove("default"),setTimeout(()=>{t.classList.add("default"),t.classList.remove("press"),t.addEventListener("animationend",m),t.classList.add("scale-up"),t.classList.remove("scale-down")},1600)}function m(){t.removeEventListener("animationend",m),t.classList.remove("scale-up"),t.classList.add("move"),t.addEventListener("transitionend",u,!1),t.style.left=window.innerWidth/2-s/2+"px",t.style.top=window.innerHeight+"px"}function u(){t.removeEventListener("transitionend",u),t.remove()}t.addEventListener("transitionend",function e(){t.removeEventListener("transitionend",e);t.addEventListener("animationend",d);t.classList.add("scale-down");t.classList.remove("move")},!1),t.classList.add("move"),t.style.left=c+"px",t.style.top=l+"px"}renderTooltip(){const e=`\n<div class="tooltip-hand default">\n<div class="tooltip-hand--text">${this.model.STATE.language.dictionary.tooltipText}</div>\n\t<svg class="tooltip-hand--icon">\n\t\t<use xlink:href="./images/icons.svg#hand-default"></use>\n\t\t<use xlink:href="./images/icons.svg#hand-press"></use>\n\t</svg>\n</div>`;document.body.insertAdjacentHTML("beforeend",e)}}(p));c.Foods=g;const v=new class{constructor(e){this.STATE=e,this.isOpened=!1}}(c),y=new class{constructor(e,t){this.model=e,this.view=t}render(){this.view.render()}open(){this.view.openMenu()}close(e){this.view.closeMenu(e)}}(v,new class{constructor(e){this.model=e}render(){this.clear();const e=this.model.STATE.language.current,t=`\n<li class="bottom__menu--language">${this.model.STATE.language.dictionary.footer[e]}</li>\n<li class="separator">|</li>\n<li class="bottom__menu--contact">${this.model.STATE.language.dictionary.footer.contact}</li>`;r.footerMenu.insertAdjacentHTML("afterbegin",t)}changeTheme(){r.footerBlock.setAttribute("theme",this.model.STATE.Menu.model.current)}clear(){r.footerMenu.innerHTML=""}openMenu(){r.footerLangList.querySelector(".bottom__flags__item")||this.renderFlags(this.model.STATE.language.current),r.footerMenu.classList.remove("visible"),r.footerLangList.classList.add("display"),setTimeout(()=>{r.footerLangList.classList.add("visible")},10),r.footerBlock.classList.add("open"),this.model.isOpened=!0}closeMenu(e){const t=()=>{r.footerLangList.removeEventListener("transitionend",t),r.footerLangList.classList.remove("display"),e&&this.clearFlags()};r.footerBlock.classList.remove("open"),r.footerLangList.addEventListener("transitionend",t,!1),r.footerLangList.classList.remove("visible"),r.footerMenu.classList.add("visible"),this.model.isOpened=!1}clearFlags(){r.footerLangList.innerHTML=""}renderFlags(e){const t=[...this.model.STATE.language.langs],s=t.indexOf(e);t.splice(s,1);const n=i(e,!1),o=t.reduce((e,t)=>e+i(t),"");function i(e,t=!0){return`\n<li class="bottom__flags__item ${t?"clickable":""}" data-lang="${e}">\n\t<svg class="bottom__flags__item--icon">\n\t\t<use xlink:href="./images/icons.svg#flag-${e}"></use>\n\t</svg>\n</li>`}r.footerLangList.insertAdjacentHTML("afterbegin",o+n)}}(v));c.Footer=y;const _=new class{constructor(e){this.STATE=e,this.imgSize=0,this.onFocusValue=-1,this.isSetGramsOpened=!1,this.isContactOpened=!1,this.isThanksOpened=!1}setItem(e){this.itemElem=e;const t=e.querySelector(".foods__page__list__item__image img"),s=t.getBoundingClientRect(),n=t.id,o=this.STATE.Menu.model.current,i=this.STATE.Calculator.model.getGrams(n)||100;this.firstValue=i,this.onFocusValue=-1,this.imgSize=0,this.itemData={origImg:t,origImgCoords:s,title:n,type:o,grams:i}}formatInputGrams(e){if(!e)return"";let t=e.toString().split("").reverse().join("");return(t=t.match(/\d{1,3}/g).join(".")).split("").reverse().join("")}}(c),L=new class{constructor(e,t){this.model=e,this.view=t}openSetGrams(e){this.model.setItem(e),this.view.openOverlay(),this.view.openSetGrams(),this.model.isSetGramsOpened=!0}async closeSetGrams(){this.view.closeSetGrams(),await this.view.closeOverlay(),this.model.isSetGramsOpened=!1}validateGramsInput(){const e=this.model.itemData.grams;return!e||isNaN(parseInt(e))||0==+e?(this.view.showGramsInvalidInput(),!1):(this.model.itemData.grams=+e,!0)}increaseGrams(){let e=+this.model.itemData.grams;if(e&&0!=+e){if(999999===e)return;if(999950===e)e=999999;else if(e%50==0)e+=50;else{e+=50-e%50}}else e=50;this.model.itemData.grams=e,this.view.renderGramsNumber(e),this.view.focusInput(),this.view.animateImgChangeSize(1)}decreaseGrams(){let e=this.model.itemData.grams;if(e&&0!=+e&&50!==e){if(1===e)return;if(e%50==0)e-=50;else{e-=e%50}}else e=1;this.model.itemData.grams=e,this.view.renderGramsNumber(e),this.view.focusInput(),this.view.animateImgChangeSize(0)}isGramsInputChanged(){return this.model.firstValue!==this.model.itemData.grams}openContact(){this.model.contactElem||(this.view.renderContact(),this.setupContactListeners()),this.view.openOverlay(),this.view.openContact(),this.model.isContactOpened=!0}async closeContact(){this.model.isThanksOpened||(this.model.isContactOpened=!1,this.view.closeContact(),await this.view.closeOverlay())}async sendMessage(){await this.view.showContactThanks(),await this.closeContact(),this.view.clearContact()}async handleOverlayGramsClose(e){const t=this.model.itemElem,s=this.model.STATE.Menu.model.current,n=this.model.itemData.title;if(e){const e=this.model.STATE.Calculator,o=this.model.STATE.Foods;if(t.classList.contains("hover")){if(this.validateGramsInput()){const i=this.model.itemData.grams;await this.closeSetGrams(),e.setGrams(o.model.sets[s].getItemObj(n),i),o.view.selectItem(t),o.view.setItemGrams(t,i),t.classList.remove("hover")}}else if(this.isGramsInputChanged()){if(this.validateGramsInput()){const i=this.model.itemData.grams;await this.closeSetGrams(),e.setGrams(o.model.sets[s].getItemObj(n),i),o.view.setItemGrams(t,i)}}else this.closeSetGrams()}else await this.closeSetGrams(),t.classList.remove("hover")}setupContactListeners(){this.model.contactElem.form.addEventListener("submit",e=>{e.preventDefault(),this.sendMessage()}),this.model.contactElem.email.addEventListener("invalid",e=>{e.preventDefault(),this.sendMessage()}),this.model.contactElem.message.addEventListener("invalid",e=>{e.preventDefault(),this.view.showContactInvalidMessage()})}}(_,new class{constructor(e){this.model=e,this.cursorPosition=-1,this.isImgAnimating=!1}openOverlay(){r.overlay.classList.add("display"),r.overlay.offsetWidth,r.overlay.classList.add("visible"),r.container.classList.add("blur")}closeOverlay(){return new Promise(e=>{const t=()=>{r.container.removeEventListener("transitionend",t),r.overlay.classList.remove("display"),e()};r.container.addEventListener("transitionend",t,!1),r.overlay.classList.remove("visible"),r.container.classList.remove("blur")})}openSetGrams(){const e=this.model.itemData;r.setGramsWrapper.dataset.type=e.type,r.setGramsImg.id=e.title,r.setGramsImgPseudo.id=e.title;const t=new MutationObserver(()=>{t.disconnect(),r.setGramsImg.classList.add("move"),o(),r.setGramsImg.addEventListener("transitionend",n,!1)});t.observe(r.setGramsImg,{attributes:!0}),r.setGramsImg.classList.add("display"),r.setGramsImg.style.top=e.origImgCoords.top+"px",r.setGramsImg.style.left=e.origImgCoords.left+"px",e.origImg.classList.add("hidden");const s=new MutationObserver(()=>{s.disconnect(),r.setGramsContainer.classList.add("visible"),this.renderGramsNumber(e.grams),this.focusInput()});s.observe(r.setGramsContainer,{attributes:!0}),r.setGramsContainer.classList.add("display"),window.addEventListener("resize",o,!1);function n(){r.setGramsImg.removeEventListener("transitionend",n),r.setGramsImg.classList.remove("move")}function o(){const e=r.setGramsImgPseudo.getBoundingClientRect();r.setGramsImg.style.top=e.top+"px",r.setGramsImg.style.left=e.left+"px"}r.setGramsInputNumber.onkeydown=t=>{t.ctrlKey||t.metaKey||13===t.keyCode||(6===e.grams.toString().length&&8!==t.keyCode&&37!==t.keyCode&&39!==t.keyCode&&40!==t.keyCode&&t.preventDefault(),69===t.keyCode&&t.preventDefault(),38===t.keyCode&&(t.preventDefault(),e.grams<999999&&this.renderGramsNumber(++e.grams)),40===t.keyCode&&(t.preventDefault(),e.grams>1&&this.renderGramsNumber(--e.grams)))},r.setGramsInputNumber.oninput=()=>{e.grams=r.setGramsInputNumber.value.replace(".",""),this.renderGramsNumber(e.grams)}}closeSetGrams(){const e=this.model.itemData,t=()=>{r.container.removeEventListener("transitionend",t),r.setGramsContainer.classList.remove("display"),e.origImg.classList.remove("hidden")};r.container.addEventListener("transitionend",t,!1),r.setGramsContainer.classList.remove("visible"),r.setGramsImg.style.transform="scale(1)";const s=new MutationObserver(()=>{s.disconnect(),r.setGramsImg.style.top=e.origImgCoords.top+"px",r.setGramsImg.style.left=e.origImgCoords.left+"px",r.setGramsImg.addEventListener("transitionend",n,!1)});function n(){r.setGramsImg.removeEventListener("transitionend",n),r.setGramsImg.classList.remove("move"),r.setGramsImg.classList.remove("display"),r.setGramsImg.style.top="",r.setGramsImg.style.left=""}s.observe(r.setGramsImg,{attributes:!0}),r.setGramsImg.classList.add("move")}showGramsInvalidInput(){const e=()=>{r.setGramsInputContainer.removeEventListener("animationend",e),r.setGramsInputContainer.classList.remove("invalid")};r.setGramsInputContainer.addEventListener("animationend",e),r.setGramsInputContainer.classList.add("invalid"),this.focusInput()}renderGramsNumber(e){const t=this.model.formatInputGrams(e),s=this.model.STATE.language.dictionary.foods.g;r.setGramsInputNumber.value=t,r.setGramsInputSymbol.innerHTML=t+`<span>${s}</span>`}focusInput(){r.setGramsInputNumber.focus()}animateImgChangeSize(e){if(1===e&&this.model.imgSize+1>=10)return;if(0===e&&this.model.imgSize-1<=-10)return;let t=document.getElementById("overlay-img-style");t||((t=document.createElement("style")).type="text/css",t.id="overlay-img-style",document.head.appendChild(t));let s="";1===e?s="animate-increase":0===e&&(s="animate-decrease");const n=r.setGramsImg;let o,i,a,c,l,d;this.isImgAnimating&&(n.classList.remove(s),this.isImgAnimating=!1),o=(1+this.model.imgSize/50).toFixed(2),i=(1.05+this.model.imgSize/50).toFixed(2),a=(1.02+this.model.imgSize/50).toFixed(2),c=(1+this.model.imgSize/50).toFixed(2),l=(.95+this.model.imgSize/50).toFixed(2),d=(.98+this.model.imgSize/50).toFixed(2),t.innerHTML=`\n@keyframes animate-increase {\n\t0% {\n\t\ttransform: scale(${o});\n\t}\n\t50% {\n\t\ttransform: scale(${i});\n\t}\n\t100% {\n\t\ttransform: scale(${a});\n\t}\n}\n\n@keyframes animate-decrease {\n\t0% {\n\t\ttransform: scale(${c});\n\t}\n\t50% {\n\t\ttransform: scale(${l});\n\t}\n\t100% {\n\t\ttransform: scale(${d});\n\t}\n}`,n.addEventListener("animationend",function t(){n.removeEventListener("animationend",t);n.classList.remove(s);n.style.transform=`scale(${1===e?a:d})`;this.isImgAnimating=!1},!1),1===e?this.model.imgSize++:0===e&&this.model.imgSize--,n.classList.add(s),this.isImgAnimating=!0}renderContact(){r.overlay.insertAdjacentHTML("beforeend",'\n<div class="overlay__contact__container">\n\t<form class="overlay__contact__form visible">\n\t\t<input class="overlay__contact--input" type="text" name="name" placeholder="" tabindex="1">\n\t\t<input class="overlay__contact--input" type="email" name="email" placeholder="" tabindex="2">\n\t\t<textarea class="overlay__contact--input" rows="6" placeholder="" required="required" tabindex="3" name="message"></textarea>\n\t\t<button class="overlay__contact--btn" type="submit" tabindex="4">Send</button>\n\t</form>\n\t<div class="overlay__contact__thanks"></div>\n</div>'),this.model.contactElem={},this.model.contactElem.container=r.overlay.querySelector(".overlay__contact__container"),this.model.contactElem.form=this.model.contactElem.container.querySelector(".overlay__contact__form"),this.model.contactElem.name=this.model.contactElem.form.querySelector('.overlay__contact--input[name="name"]'),this.model.contactElem.email=this.model.contactElem.form.querySelector('.overlay__contact--input[name="email"]'),this.model.contactElem.message=this.model.contactElem.form.querySelector("textarea.overlay__contact--input"),this.model.contactElem.btn=this.model.contactElem.form.querySelector(".overlay__contact--btn"),this.model.contactElem.thanks=this.model.contactElem.container.querySelector(".overlay__contact__thanks")}openContact(){this.renderContactPlaceholders(),this.renderThanksText(),this.model.contactElem.container.classList.add("display"),this.model.contactElem.container.classList.add("form"),this.model.contactElem.form.classList.add("visible"),this.model.contactElem.name.focus(),this.model.contactElem.container.offsetWidth,this.model.contactElem.container.classList.add("visible")}closeContact(){const e=()=>{r.container.removeEventListener("transitionend",e),this.model.contactElem.container.classList.remove("display"),this.model.contactElem.container.classList.remove("thanks"),this.model.contactElem.container.classList.remove("ru")};r.container.addEventListener("transitionend",e),this.model.contactElem.container.classList.remove("visible")}renderContactPlaceholders(){const e=this.model.STATE.language.dictionary.contact.name,t=this.model.STATE.language.dictionary.contact.email,s=this.model.STATE.language.dictionary.contact.message,n=this.model.STATE.language.dictionary.contact.send;this.model.contactElem.name.placeholder=e,this.model.contactElem.email.placeholder=t,this.model.contactElem.message.placeholder=s,this.model.contactElem.btn.textContent=n}renderThanksText(){const e=this.model.STATE.language.dictionary.contact.thanks;this.model.contactElem.thanks.textContent=e}clearContact(){this.model.contactElem.name.value="",this.model.contactElem.email.value="",this.model.contactElem.message.value=""}showContactInvalidMessage(){const e=()=>{this.model.contactElem.message.removeEventListener("animationend",e),this.model.contactElem.message.classList.remove("invalid")};this.model.contactElem.message.addEventListener("animationend",e),this.model.contactElem.message.classList.add("invalid"),this.model.contactElem.message.focus()}showContactThanks(){return new Promise(e=>{const t=()=>{this.model.contactElem.thanks.removeEventListener("animationend",t),this.model.isThanksOpened=!1,e()},s=()=>{this.model.contactElem.form.removeEventListener("transitionend",s),this.model.contactElem.container.classList.remove("form"),this.model.contactElem.thanks.addEventListener("animationend",t),this.model.contactElem.container.classList.add("thanks")};this.model.isThanksOpened=!0,this.model.contactElem.form.addEventListener("transitionend",s),this.model.contactElem.form.classList.remove("visible"),"ru"===this.model.STATE.language.current&&this.model.contactElem.container.classList.add("ru")})}}(_));function w(){const e=getComputedStyle(r.footerBlock,":after").content;g.model.itemsPerPage=parseInt(e.replace('"',""))}function b(){const e=r.btnPrev.querySelector(".arrow--icon").getBoundingClientRect(),t=document.getElementById("arrow-left"),s=parseInt(100*e.height/123);t.setAttribute("transform",`scale(.${s})`);r.btnNext.querySelector(".arrow--icon");document.getElementById("arrow-right").setAttribute("transform",`scale(.${s})`)}function E(){const e=L.model.onFocusValue;if(-1===e)return;const t=r.setGramsInputNumber.value.replace(".","");e<t?L.view.animateImgChangeSize(1):e>t&&L.view.animateImgChangeSize(0),L.model.onFocusValue=-1}function T(e){const t=e.target.closest(".foods__page__list__item");t&&(e.preventDefault(),t.classList.contains("selected")||t.classList.add("hover"),L.openSetGrams(t),g.model.handIsDemonstrated=!0,window.sessionStorage.setItem("handIsDemonstrated","true"))}c.Overlay=L,document.addEventListener("click",e=>{u.model.isOpened&&!e.target.closest(".menu")&&u.close(),y.model.isOpened&&!e.target.closest(".bottom")&&y.close()}),r.menuList.addEventListener("click",e=>{if(u.model.isOpened){const t=e.target.closest(".menu__item");t.dataset.type===u.model.current?u.close():(u.close(t),g.changeFoodsSet(u.model.current),y.view.changeTheme())}else u.open()}),r.mainContainer.addEventListener("mousedown",function(e){if(1!==e.which)return;const t=e.target.closest(".foods__page__list__item");if(!t)return;r.mainContainer.addEventListener("mouseup",n,!1);const s=setTimeout(()=>{T(e),r.mainContainer.removeEventListener("mouseup",n)},500);function n(){r.mainContainer.removeEventListener("mouseup",n),clearTimeout(s);const e=u.model.current,o=t.querySelector(".foods__page__list__item__image img").id;f.includes(o)?(f.deleteItem(o),g.view.deselectItem(t),g.view.setItemGrams(t,100)):(f.addItem(g.model.sets[e].getItemObj(o)),g.view.selectItem(t),g.showPressAndHoldTooltip())}},!1),window.addEventListener("DOMContentLoaded",async function(){w(),b(),await d.setLanguage(),u.render(),y.render(),g.openFoodsSet(u.model.current)}),window.addEventListener("load",function(){!function(){if(n())r.mainContainer.addEventListener("contextmenu",T);else{const e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href="./styles/desktop.css",document.head.appendChild(e)}}(),function(){const e=window.sessionStorage.getItem("trashIsDemonstrated"),t=window.sessionStorage.getItem("handIsDemonstrated");f.model.trashIsDemonstrated=!!e;g.model.handIsDemonstrated=!!t}()}),window.addEventListener("resize",w),window.addEventListener("resize",b),window.addEventListener("dblclick",e=>e.preventDefault()),r.btnPrev.addEventListener("click",()=>{g.scrollToPrevPage()}),r.btnNext.addEventListener("click",()=>{g.scrollToNextPage()}),r.overlay.addEventListener("click",e=>{e.target.closest(".overlay__set-grams__container")||e.target.matches(".overlay__set-grams--image")||e.target.matches(".overlay__contact__container, .overlay__contact__container *")||(L.model.isSetGramsOpened?L.handleOverlayGramsClose(!1):L.model.isContactOpened&&L.closeContact())},!1),document.addEventListener("keyup",e=>{if(13===e.keyCode&&L.model.isSetGramsOpened)L.handleOverlayGramsClose(!0);else{if(27!==e.keyCode||!(void 0).model.isSetGramsOpened)return;L.handleOverlayGramsClose(!1)}}),r.setGramsBtnInc.addEventListener("click",()=>{L.increaseGrams(),L.model.onFocusValue=-1},!1),r.setGramsBtnDec.addEventListener("click",()=>{L.decreaseGrams(),L.model.onFocusValue=-1},!1),r.setGramsBtn.addEventListener("click",()=>{L.handleOverlayGramsClose(!0)},!1),r.setGramsInputNumber.addEventListener("focus",()=>{-1===L.model.onFocusValue&&(L.model.onFocusValue=r.setGramsInputNumber.value.replace(".",""))}),r.setGramsContainer.addEventListener("click",e=>{e.target.matches(".overlay__set-grams__container")&&E()},!1),r.setGramsImg.addEventListener("click",()=>{E()},!1),r.footerMenu.addEventListener("click",e=>{e.target.closest(".bottom__menu--language")?y.open():e.target.closest(".bottom__menu--contact")&&L.openContact()},!1),r.footerLangList.addEventListener("click",async e=>{const t=e.target.closest(".bottom__flags__item");if(t)if(t.classList.contains("clickable")){const e=t.dataset.lang;await d.setLanguage(e),u.render(),g.openFoodsSet(u.model.current,!0,g.model.curPage),g.view.goToPage(g.model.curPage),y.render(),y.close(!0)}else y.close()},!1),function(){const e=Math.floor(r.mainContainer.offsetWidth/5),t=Math.floor(e/2),s=r.mainContainer.offsetWidth,n=Math.floor(s/2),o=30;let i,a,c,l,d=!1;function m(){if(d){d=!1,a=r.mainContainer.scrollLeft,c=a-i;try{l?Math.abs(c)<e?(r.mainContainer.style.overflowX="hidden",g.view._scroll()):c>0?g.view.animateScroll(1):c<0&&g.view.animateScroll(0):(r.mainContainer.style.overflowX="hidden",Math.abs(c)<e?g.view._scroll():Math.abs(c)>=n?c>0?g.scrollToNextPage():c<0&&g.scrollToPrevPage():g.view._scroll())}catch(e){g.view._scroll(),console.log(e)}}else r.mainContainer.removeEventListener("touchmove",u)}function u(){let e,s,n,i,a,c;d=!0,r.mainContainer.removeEventListener("touchmove",u),e=Date.now(),i=r.mainContainer.scrollLeft,requestAnimationFrame(function m(){d&&(s=Date.now(),(n=s-e)>=o&&(a=r.mainContainer.scrollLeft,c=a-i,l=Math.abs(c)>t,i=a,e=s),requestAnimationFrame(m))})}r.mainContainer.addEventListener("touchstart",function(e){r.mainContainer.style.overflowX="scroll",r.mainContainer.addEventListener("touchmove",u,!1),i=r.mainContainer.scrollLeft},!1),r.mainContainer.addEventListener("touchend",m,!1),r.mainContainer.addEventListener("touchcancel",m,!1)}(),r.caloriesIcon.addEventListener("click",e=>{const t=r.caloriesIcon;t.classList.contains("active")&&t.classList.contains("trash")&&(f.clearTotalCalories(),g.view.deselectAll())})}]);